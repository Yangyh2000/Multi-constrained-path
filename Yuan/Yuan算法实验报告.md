# Yuan算法实验报告

无98 杨元昊 2019011197

1. “算法运行示例”截图

   情况一：图100个节点。三种属性随机生成。

   输出包括：每对节点之间选出的路径经过的节点，每对节点之间计算过程的计算时间，以及总计算时间和平均计算时间。同时把随机生成的100个节点的三个属性输出到文件夹random_data里。

   情况二：图13个节点。三种属性从data文件夹中读取。

   输出包括：每对节点之间选出的路径经过的节点，每对节点之间计算过程的计算时间，以及总计算时间和平均计算时间。

   下面的截图为情况二的运行结果截图。（情况一只需把`int cond = 2;`改为`int cond = 1;`）

   ![image-20220330072810639](C:\Users\11147\AppData\Roaming\Typora\typora-user-images\image-20220330072810639.png)

2. 变量说明

   函数参数：

   在函数`limited_granularity(w, c, n, s, t)`中，w表示链路的加性权重$w_k(u,v)$，c表示权重的约束$c_k$，n表示节点的个数，s表示源点，t表示汇点。

   在函数`relax_g(u, v, w)`中，u，v表示松弛的节点，w表示两节点之间边的权重。

   在函数`limited_path(w, c, n, s, t)`和函数`relax_p(u, v, w)`中，各个参数的意义同上。

   全局变量：

   在`Yuan.h`中，对应有限粒度部分的：$d[u][i_2][i_3]$记录了从s到u所有路径p里满足条件$w_2(p)\le r^2_{i_2},w_3(p)\le r^3_{i_3}$的路径里$w_1$权重最小的路径；$r[i][1:X_i]$表示约束范围$(0,c_i]$映射到的元素$r^i_{1:X_i}$。

   对应有限路径部分的：$PATH[u]$记录了所有找到的从s到u的最优QoS路径。

   在`getgraph.h`中，lat，jit，plr分别表示往返时延，时延抖动，丢包率。

   在`showans.h`中，ans表示输出的路径。

   在`heads.h`中，N表示情况一的节点数100，Dim表示情况二的节点数13，K表示约束的个数3，Inf表示设定一个足够大的数1e6即$10^6$，X2、X3表示“有限粒度”启发式方法中约束范围映射范围元素个数，X表示“有限路径”启发式方法中PATH集合的大小。

3. 算法运行时间的统计结果

   规定算法中主权重为往返时延。

   设定时延、抖动和丢包率的上限分别为500 ms，50 ms，10 %。

   情况一中随机的数据精度为小数点后两位，时延在0 - 1000 ms间均匀随机，抖动在0 - 100 ms间均匀随机，丢包率在0 - 10 %间均匀随机。

   情况一：一共计算100 * 99 个有序节点对。由于总计算时间过长，下面只写出由前几个节点对计算时间大致得到的估算平均计算时间。

   |                 | 估算平均计算时间 |
   | --------------- | ---------------- |
   | 有限粒度X=5*5   | 2.5 s            |
   | 有限粒度X=8*8   | 10 s             |
   | 有限粒度X=10*10 | 23 s             |
   | 有限路径X=2     | 0.8 s            |
   | 有限路径X=5     | 3.5 s            |
   | 有限路径X=10    | 13 s             |
   | 有限路径X=100   | 320 s            |
   | 有限路径X=1000  | 未测试           |
   
   情况二：一共计算13 * 12个有序节点对。
   
   |                 | 总计算时间 | 平均计算时间 |
   | --------------- | ---------- | ------------ |
   | 有限粒度X=5*5   | 0.948195 s | 0.006078 s   |
   | 有限粒度X=8*8   | 3.240231 s | 0.020771 s   |
   | 有限粒度X=10*10 | 5.786032 s | 0.037090 s   |
   | 有限路径X=2     | 0.202785 s | 0.001300 s   |
   | 有限路径X=5     | 0.323373 s | 0.002073 s   |
   | 有限路径X=10    | 0.471595 s | 0.003023 s   |
   | 有限路径X=100   | 0.558292 s | 0.003579 s   |
   | 有限路径X=1000  | 0.564121 s | 0.003616 s   |
   
   
